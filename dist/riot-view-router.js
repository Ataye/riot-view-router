!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var r in n)("object"==typeof exports?exports:t)[r]=n[r]}}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="dist/",e(e.s=0)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Router=void 0;var r=n(1);e.Router=function(t,e){return{$router:new r.Router(t,e)}}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.Router=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(2),i=n(3);e.Router=function(){function t(e,n){r(this,t);var o=this;o.$constants=a.Constants,o.$utils=new i.Utils(o),Object.defineProperty(o,"location",{get:function(){return window.location.hash},set:function(t){window.location.hash=t}});var u=["defaultState"],s=["debugging","fallbackState","onBeforeStateChange","onStateChange"],c=u.concat(s);for(var l in e)if(-1==c.indexOf(l))throw Error('Unknown option "'+l+'" is not supported');o=Object.assign(o,e),o.debugging=o.debugging||!1;var f=["name","route","tag"];if(n=Array.isArray(n)?n:[n],n.forEach(function(t){if(!t.name.match(o.$constants.regex.stateName))throw Error('Invalid state name "'+t.name+'",        state names must be a valid alphanumeric string.')}),f.forEach(function(t){n.forEach(function(e){if(!e[t])throw Error('Required state option "'+t+'" not specified')})}),console.log(o),n.forEach(function(t){t.route=o.$utils.splitRoute(t.route)}),o.states=n,!o.defaultState)throw Error("Default state must be specified");if(o.defaultState.indexOf(":")>-1)throw Error("Default state route cannot take variable parameters");if(!o.$utils.stateByName(o.defaultState))throw Error('State "'+o.defaultState+'" not found in specified states');if(o.fallbackState){if(!o.$utils.stateByName(o.fallbackState))throw Error('Fallback state "'+o.fallbackState+'" not found in specified states')}else o.debugging&&console.warn('Fallback state not specified, dfaulting to "'+o.defaultState+'"'),o.fallbackState=o.defaultState;o.marker?o.marker.match(o.$constants.regex.marker)||(debugging&&(console.warn('Marker "'+o.marker+'" contains unsupported characters'),console.warn('Defaulting to "'+o.$constants.defaults.marker+'"')),o.marker=o.$constants.defaults.marker):o.marker=o.$constants.defaults.marker,o.marker=o.marker||o.$constants.defaults.marker}return o(t,[{key:"navigate",value:function(t){this.location="#!"+t}},{key:"pushState",value:function(t){var e=this,n=e.$utils.stateByName(t);if(e.location.split("#!")[1]!==n.route.route){if(!n.route.variables.length)return void e.navigate(n.route.route);e.debugging&&(console.warn('State "'+t+'" does not match current route.'),console.warn("Could not re-route due to route variables."))}e.onBeforeStateChange&&e.onBeforeStateChange(n),e.$state&&e.$state.onLeave&&e.$state.onLeave(n),e.transition(n),e.onStateChange&&e.onStateChange(n),n.onEnter&&n.onEnter(n),e.$state=n}},{key:"transition",value:function(t){var e=this,n=e.$utils.extractRouteVars(t);if(e.$state){var r=riot.util.vdom.find(function(t){return t.root.localName==e.$state.tag});if(!r)throw Error("Could not find a matching tag to unmount");r.unmount()}var o=document.createElement(t.tag),a={};n.forEach(function(t){a[t.name]=t.value}),e.context.appendChild(o),riot.mount(t.tag,a);var i=t.title;n.forEach(function(t){return i=i.replace("<"+t.name+">",t.value)}),document.title=i}},{key:"start",value:function(){var t=this;t.location||(window.location.hash="#!"+t.$utils.stateByName(t.defaultState).route.route),t.context_id="$"+(new Date).getTime().toString(),window[t.context_id]=window.setInterval(function(){var e=document.querySelector(t.marker)||document.querySelector("["+t.marker+"]");e&&(t.context=e,t.pushState(t.$utils.stateByRoute().name),window.onhashchange=function(){t.pushState(t.$utils.stateByRoute().name)},window.clearInterval(window[t.context_id]))},250)}}]),t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Constants={defaults:{marker:"r-view",anchorMarker:"r-sref"},regex:{marker:/[a-zA-Z\-]*/g,stateName:/[a-zA-Z0-9]/g,routeFormat:/^\/(?::?[a-zA-Z0-9]+\/?)*$/g,routeVariable:/(:[a-zA-Z]*)/g}}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();e.Utils=function(){function t(e){r(this,t),this.$router=e}return a(t,[{key:"stateByName",value:function(t){return this.$router.states.find(function(e){return t==e.name})}},{key:"splitRoute",value:function(t){var e=this.$router;if(!t.match(e.$constants.regex.routeFormat))throw Error('Route "'+t+'" did not match expected route format');var n=t.split("/").slice(1),r=n.filter(function(t){return t.match(e.$constants.regex.routeVariable)}).map(function(t){return{name:t.split("").slice(1).join(""),position:n.indexOf(t)}});return r.forEach(function(e){if(r.filter(function(t){return e}).length>1)throw Error('Found duplicate route variable pattern\n\t "'+t+'"')}),{route:t,pattern:n,variables:r}}},{key:"stateByRoute",value:function(){var t=this.$router,e=t.location.split("#!");e=e.length>1?e[1].split("/").slice(1):["/"];var n=t.states.find(function(t){var n=t.route;if(e.length==n.pattern.length){for(var r in e){var a=function(t){if(e[t]!==n.pattern[t]&&"*"!==n.pattern[t]&&!n.variables.find(function(e){return e.position==t}))return{v:!1}}(r);if("object"===(void 0===a?"undefined":o(a)))return a.v}return!0}});return n||(t.debugging&&console.warn("Route was not matched, defaulting to fallback state"),this.stateByName(t.fallbackState))}},{key:"extractRouteVars",value:function(t){var e=this.$router,n=e.location.split("#!");n.length>1&&(n=n[1].split("/").slice(1));var r=t.route.variables;return r.forEach(function(t){t.value=n[t.position]}),r}}]),t}()}])});