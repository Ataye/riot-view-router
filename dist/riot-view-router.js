!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var a in n)("object"==typeof exports?exports:t)[a]=n[a]}}(this,function(){return function(t){function e(a){if(n[a])return n[a].exports;var o=n[a]={i:a,l:!1,exports:{}};return t[a].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,a){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:a})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="dist/",e(e.s=0)}([function(t,e,n){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.Router=void 0;var o=n(1),r=n(2),i=n(3);e.Router=function t(e,n){a(this,t);var s=this.$router={};s.$constants=o.Constants,s=Object.assign(s,r.Core),s.$utils=i.Utils,Object.defineProperty(s,"location",{get:function(){return window.location.hash},set:function(t){window.location.hash=t}});var u=["defaultState"],f=["debugging","fallbackState","onBeforeStateChange","onStateChange"],l=u.concat(f);for(var c in e)if(-1==l.indexOf(c))throw Error('Unknown option "'+c+" is not supported");s=Object.assign(s,e),s.debugging=s.debugging||!1;var d=["name","route","tag"];if(n=Array.isArray(n)?n:[n],n.forEach(function(t){if(!t.name.match(s.$constants.regex.stateName))throw Error('Invalid state name "'+t.name+'",        state names must be a valid alphanumeric string.')}),d.forEach(function(t){n.forEach(function(e){if(!e[t])throw Error('Required state option "'+t+'" not specified')})}),n.forEach(function(t){t.route=s.$utils.splitRoute(s,t.route)}),s.states=n,!s.defaultState)throw Error("Default state must be specified");if(s.defaultState.indexOf(":")>-1)throw Error("Default state route cannot take variable parameters");if(!s.$utils.stateByName(s,s.defaultState))throw Error('State "'+s.defaultState+'" not found in specified states');if(s.fallbackState){if(!s.$utils.stateByName(s,s.fallbackState))throw Error('Fallback state "'+s.fallbackState+'" not found in specified states')}else s.debugging&&console.warn('Fallback state not specified, dfaulting to "'+s.defaultState+'"'),s.fallbackState=s.defaultState;s.marker?s.marker.match(s.$constants.regex.marker)||(debugging&&(console.warn('Marker "'+s.marker+'" contains unsupported characters'),console.warn('Defaulting to "'+s.$constants.defaults.marker+'"')),s.marker=s.$constants.defaults.marker):s.marker=s.$constants.defaults.marker,s.marker=s.marker||s.$constants.defaults.marker,s.start()}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Constants={defaults:{marker:"r-view",anchorMarker:"r-sref"},regex:{marker:/[a-zA-Z\-]*/g,stateName:/[a-zA-Z0-9]/g,routeFormat:/^\/(?::?[a-zA-Z0-9]+\/?)*$/g,routeVariable:/(:[a-zA-Z]*)/g}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Core={navigate:function(t){self.location="#!"+t},pushState:function(t){var e=self.$utils.stateByName(self,t);if(self.location.split("#!")[1]!==e.route.route){if(!e.route.variables.length)return void self.navigate(e.route.route);self.debugging&&(console.warn('State "'+t+'" does not match current route.'),console.warn("Could not re-route due to route variables."))}self.onBeforeStateChange&&self.onBeforeStateChange(e),self.$state&&self.$state.onLeave&&self.$state.onLeave(e),self.transition(e),self.onStateChange&&self.onStateChange(e),e.onEnter&&e.onEnter(e),self.$state=e},transition:function(t){var e=self.$utils.extractRouteVars(self,t);if(self.$state){var n=riot.util.vdom.find(function(t){return t.root.localName==self.$state.tag});if(!n)throw Error("Could not find a matching tag to unmount");n.unmount()}var a=document.createElement(t.tag),o={};e.forEach(function(t){o[t.name]=t.value}),self.context.appendChild(a),riot.mount(t.tag,o);var r=t.title;e.forEach(function(t){return r=r.replace("<"+t.name+">",t.value)}),document.title=r},start:function(){console.log(self),self.location||(window.location.hash="#!"+self.$utils.stateByName(self,self.defaultState).route.route),self.context_id="$"+(new Date).getTime().toString(),window[self.context_id]=window.setInterval(function(){var t=document.querySelector(self.marker)||document.querySelector("["+self.marker+"]");t&&(self.context=t,self.pushState(self.$utils.stateByRoute(self).name),window.onhashchange=function(){self.pushState(self.$utils.stateByRoute(self).name)},window.clearInterval(window[self.context_id]))},250)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.Utils={stateByName:function(t,e){return t.states.find(function(t){return e==t.name})},splitRoute:function(t,e){if(!e.match(t.$constants.regex.routeFormat))throw Error('Route "'+e+'" did not match expected route format');var n=e.split("/").slice(1),a=n.filter(function(e){return e.match(t.$constants.regex.routeVariable)}).map(function(t){return{name:t.split("").slice(1).join(""),position:n.indexOf(t)}});return a.forEach(function(t){if(a.filter(function(e){return t}).length>1)throw Error('Found duplicate route variable pattern\n\t "'+e+'"')}),{route:e,pattern:n,variables:a}},stateByRoute:function(t){var e=t.location.split("#!");e=e.length>1?e[1].split("/").slice(1):["/"];var n=t.states.find(function(t){var n=t.route;if(e.length==n.pattern.length){for(var o in e){var r=function(t){if(e[t]!==n.pattern[t]&&"*"!==n.pattern[t]&&!n.variables.find(function(e){return e.position==t}))return{v:!1}}(o);if("object"===(void 0===r?"undefined":a(r)))return r.v}return!0}});return n||(t.debugging&&console.warn("Route was not matched, defaulting to fallback state"),t.$utils.stateByName(t.fallbackState))},extractRouteVars:function(t,e){var n=t.location.split("#!");n.length>1&&(n=n[1].split("/").slice(1));var a=e.route.variables;return a.forEach(function(t){t.value=n[t.position]}),a}}}])});